<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/bootstrap-grid.css">
  <link rel="stylesheet" href="dist/css/lightbox.min.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
  <script src="js/datamaps.world.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="js/eraData.js"></script>
  <script src="http://d3js.org/queue.v1.min.js"></script>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>

  <!-- <script src="HelperFunctions.js"></script> -->
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  <style type="text/css">
    body,html{height: 100%; margin: 0 auto; font-size:14px; color: #222;line-height: 20px; font-family:'Quicksand','Helvetica Neue',Helvetica,Arial,sans-serif; background-color: #f8f8f8;}
    header{padding: 1em 3em; background-color:#e6e6e6; width: 100%; position: fixed; top: 0; box-shadow: 0px 1.5px 15px #8e8e8e; z-index: 100;}
    .left{display:inline-block; max-height: 1000px; overflow-y: scroll; margin: 0 auto; padding: 2em 3em; background-color: #eee;}
    div.main{width:100%; margin:0 auto; padding-top: 3.5em;}
    h1{font-size: 24px;}
    h2{font-size: 24px;padding-bottom: 0;}
    h3{font-size: 20px;padding-bottom: 0.4em; padding-top: 1em;}
    h4{font-size: 16px;padding-bottom: 0.3em; padding-top: 0.4em;}
    .left img{padding: .7em 0;}
    </style>
  <title>MOMA and Art Movements</title>

</head>

<body>
  <header>
      <h1>MOMA and Art Movements</h1>
  </header>
  <div class="container-fluid main">
    <div class="row">
      <div class="col-sm-3 left">
        <h1>Impressionism (1872-1892)</h1>
        <p>Impressionism can be considered the first distinctly modern movement in painting. Developing in Paris in the 1860s, its influence spread throughout Europe and eventually the United States. Its originators were artists who rejected the official, government-sanctioned exhibitions, or salons, and were consequently shunned by powerful academic art institutions. In turning away from the fine finish and detail to which most artists of their day aspired, the Impressionists aimed to capture the momentary, sensory effect of a scene - the impression objects made on the eye in a fleeting instant. To achieve this effect, many Impressionist artists moved from the studio to the streets and countryside, painting en plein air. </p>
        <h2>Most Important Artworks:</h2>
        <a href="http://www.theartstory.org/movement-impressionism-artworks.htm#pnt_6" target="_blank"><h3>Vetheuil in the Fog (1879)</h3></a>
        <p><b>Artist:</b>Claude Monet</p>
        <p><b>Artwork description & Analysis:</b> In 1878, Monet moved his family to the town of Vetheuil in northern France. They temporarily lived with a wealthy magnate who became Monet's patron. His Vetheuil in the Fog is among his finest works, offering a subtle, albeit distinct impression of a figural form. As was characteristic of many of Monet's paintings, he applied his brush rather quickly to the canvas in order to capture the exact image he wanted before the sunlight shifted or faded away altogether. Monet's emphasis on the fleeting changes in the natural world was a central aspect of his oeuvre that captures the ephemerality of nature and preserves it within the picture plane; thus, the momentary perception is crystallized in the replication of the optical experience of it.</p>
        <b>Oil on canvas - Musee Marmottan Monet, Paris</b>
        <a href="pics/vetheuil-in-the-fog-1879.jpg" data-lightbox="example-set" data-title="Vetheuil in the fog 1879"><img src="pics/vetheuil-in-the-fog-1879.jpg" width="100%" ></a>

        <h1>Post-Impressionism (1855-1901)</h1>
        <p>Post-Impressionism (also spelled Postimpressionism) is a predominantly French art movement that developed roughly
          between 1886 and 1905, from the last Impressionist exhibition to the birth of Fauvism. Post-Impressionism emerged
          as a reaction against Impressionists' concern for the naturalistic depiction of light and colour. </p>

        <h1>Expressionism (1855-1901)</h1>
        <p>Post-Impressionism (also spelled Postimpressionism) is a predominantly French art movement that developed roughly
          between 1886 and 1905, from the last Impressionist exhibition to the birth of Fauvism. Post-Impressionism emerged
          as a reaction against Impressionists' concern for the naturalistic depiction of light and colour. </p>
        <svg id="stacked-bar"></svg>
        <svg id="donut"></svg>

      </div>
      <div class="col-sm-9">
        <div id="timebar" style="margin-top: 50px;">
  </div>
        <div id="container" style="width:100%; min-height:450px"></div>
        <svg id="bar-chart"></svg>
      </div>
    </div>
  </div>


  <script type="text/javascript">
    //var map = new Datamap({element: document.getElementById('container')});
    //var countryName = []
    var movementTag = []
    var dataForEachCountry=[]
    var dataForAllCountries=[]
    var countForEachCountry = {
      "(American)": 0,
      '(Austrian)': 0,
      "(Russian)": 0
    };

    var bubble_map = new Datamap({

    element: document.getElementById("container"),
    scope: 'world',
    geographyConfig: {
      popupOnHover: false,
      highlightOnHover: false
    },
    fills: {
          // 'USA': '#1f77b4',
          // 'RUS': '#9467bd',
          'impression': '#4188EC',
          'cubism':'#DD433D',
          'bauhaus':'#F5B240',
          'surrealism':'#009C60',
          'abstract':'#AC4BB5',
          'minimalism':'#FF6E4E',
          'pop':'#00ADBE',
          'photorealism':'#9E9C3F',
          defaultFill: '#d7d7d7'
        }
        // data: {
        //   'USA': {
        //     fillKey: 'USA'
        //   },
        //   'RUS': {
        //     fillKey: 'RUS'
        //   },
        //   'AUT': {
        //     fillKey: 'PRC'
        //   }
        // }
          });
    function drawBubble(countries,tag){

        


      var countAll =[]
      var countRange=[]

      for (let i in countries){
        countAll.push(countries[i].count)
      }
      countRange.min=d3.min(countAll)
      countRange.max=d3.max(countAll)

      var bubblesArray = [];
      for (let i in countries) {
        let country = countries[i]
        let count = country.count
        let countryName = country.name
        let centered = country.abbr
        var radiusScale=d3.scale.linear()
        .domain([1,19000])
        .range([5,100]);
        var bubblesDict = {};
        bubblesDict.radius=radiusScale(count);
        bubblesDict.count=count;
        bubblesDict.countryName=countryName;
        bubblesDict.centered=centered;
        bubblesDict.fillKey=tag;
        bubblesArray.push(bubblesDict);

      }
      // bubble_map.bubbles([]);
      bubble_map.bubbles(bubblesArray, {
        popupTemplate: function (geo, data) {
          return '<div class="hoverinfo">Artwork:' + data.count + ' in ' + data.countryName + ''
        }
      });
    };

    // d3.json("cleaning/era_json.json", function (dataAll) {
    //   var bubble_map = new Datamap({
    //     element: document.getElementById("container"),
    //     scope: 'world',
    //     geographyConfig: {
    //       popupOnHover: false,
    //       highlightOnHover: false
    //     },
    //     fills: {
    //       'USA': '#1f77b4',
    //       'RUS': '#9467bd',
    //       'AUT': '#ff7f0e',
    //       defaultFill: '#6e6e6e'
    //     },
    //     data: {
    //       'USA': {
    //         fillKey: 'USA'
    //       },
    //       'RUS': {
    //         fillKey: 'RUS'
    //       },
    //       'AUT': {
    //         fillKey: 'PRC'
    //       }
    //     }

    //   });

    //   var countAll =[]
    //   var countRange=[]

    //   for (let idx in dataAll.data) {
    //     let movement = dataAll.data[1];
    //     var bubblesArray = [];
    //     for (let i in movement.countries) {
    //       let country = movement.countries[i]
    //       let count = country.count
    //       let countryName = country.name
    //       let centered = country.abbr

    //       countAll.push(count)
    //       console.log(countAll)
    //       countRange.min=d3.min(countAll)
    //       countRange.max=d3.max(countAll)
    //       console.log(countRange)

    //       var radiusScale=d3.scale.linear()
    //       .domain([countRange.min,countRange.max])
    //       .range([5,100])

    //       var bubblesDict = {};
    //       bubblesDict.radius=radiusScale(count);
    //       bubblesDict.count=count;
    //       bubblesDict.countryName=countryName;
    //       bubblesDict.centered=centered;
    //       bubblesArray.push(bubblesDict);
    //       }

    //     }            
    //   bubble_map.bubbles(bubblesArray, {
    //     popupTemplate: function (geo, data) {
    //       return '<div class="hoverinfo">Artwork:' + data.count + ' in ' + data.countryName + ''
    //     }
    //   });
    // });

  google.charts.load("current", {packages:["timeline"]});
  google.charts.setOnLoadCallback(drawChart);


  function drawChart() {
    var container = document.getElementById('timebar');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();

    dataTable.addColumn({ type: 'string', id: 'Term' });
    dataTable.addColumn({ type: 'string', id: 'dummy bar label' });
    dataTable.addColumn({ type: 'string', role: 'tooltip','p':{'html':true}});
    dataTable.addColumn({ type: 'date', id: 'Start' });
    dataTable.addColumn({ type: 'date', id: 'End' });
dataTable.addRows([
      [ 'Art Movements','Impressionism & Post-Impressionism',"Impressionism & Post-Impressionism <br> 1865-1914 <br> Duration: 49 years", new Date(1865,0,0), new Date(1914,0,0) ],
      [ 'Art Movements', 'Cubism','Cubism <br> 1907-1922 <br> Duration:15 years',new Date(1907,null,null),  new Date(1922,null,null) ],
      [ 'Art Movements', 'Bauhaus','Bauhaus <br> 1919-1933 <br> Duration:14 years',new Date(1919,0,0),new Date(1933,0,0) ],
      [ 'Art Movements', 'Surrealism','Surrealism <br> 1924-1942 <br> Duration:18 years',new Date(1924,0,0),new Date(1942,0,0) ],
      [ 'Art Movements', 'Abstract Expressionism','Abstract Expressionism <br> 1940-1950 <br> Duration:10 years',  new Date(1940,0,0),  new Date(1960,0,0)],
      [ 'Art Movements', 'Pop Art','Pop Art <br> 1950-1970 <br> Duration:20 years',  new Date(1950,0,0),  new Date(1970,0,0)],
      [ 'Art Movements', 'Minimalism','Minimalism<br> 1960-1970 <br> Duration:10 years',  new Date(1960,0,0),  new Date(1970,0,0)],
      [ 'Art Movements', 'Photorealism','Photorealism <br> 1970-2000 <br> Duration:30 years',  new Date(1970,0,0),  new Date(2000,1,1)]]);

    var options = {
      height:170,
      width:1030,
      timeline: {rowLabelStyle: {fontName: 'Helvetica', fontSize: 15 },barLabelStyle: { fontName: 'Garamond', fontSize: 15 } },
      tooltip: {isHtml: true}
    };

    chart.draw(dataTable, options);

    google.visualization.events.addListener(chart, 'select', myClickHandler);

    function myClickHandler(){
    var selection = chart.getSelection();
    var message = '';

    for (var i = 0; i < selection.length; i++) {
    var item = selection[i];
    if (item.row != null && item.column != null) {
      message += '{row:' + item.row + ',column:' + item.column + '}';
    } else if (item.row != null) {
      message += '{row:' + item.row + '}';
    } else if (item.column != null) {
      message += '{column:' + item.column + '}';
    }
    }
    if (message == '') {
     message = 'nothing';
    }
    if (message == '{row:0}'){
      barChart.update(eraData["data"][0].classification);
      drawBubble(eraData["data"][0].countries,"impression");

    }else if (message == '{row:1}'){
      barChart.update(eraData["data"][1].classification);
      drawBubble(eraData["data"][1].countries,"cubism");
    }else if (message == '{row:2}'){
      barChart.update(eraData["data"][2].classification);
      drawBubble(eraData["data"][2].countries,"bauhaus");
    }else if (message == '{row:3}'){
      barChart.update(eraData["data"][3].classification);
      drawBubble(eraData["data"][3].countries,"surrealism");
    }else if (message == '{row:4}'){
      barChart.update(eraData["data"][4].classification);
      drawBubble(eraData["data"][4].countries,"abstract");
    }else if (message == '{row:5}'){
      barChart.update(eraData["data"][5].classification);
      drawBubble(eraData["data"][5].countries,"pop");
    }else if (message == '{row:6}'){
      barChart.update(eraData["data"][6].classification);
      drawBubble(eraData["data"][6].countries,"minimalism");
    }else if (message == '{row:7}'){
      barChart.update(eraData["data"][7].classification);
      drawBubble(eraData["data"][7].countries,"photorealism");
    }
    console.log(message);
    // alert('You selected ' + message);
}
}

let loaded_data;

let load_json = d3.json('cleaning/era_json.json', function(d){
  loaded_json = d;
});

console.log(loaded_data);


</script>

<!-- <div id="example2.2" style="height: 180px;"></div> -->
<!--   </script> -->
  <script src="js/barChart.js"></script>
  <!-- Lightbox -->
    <script src="dist/js/lightbox-plus-jquery.min.js"></script>
</body>

</html>
